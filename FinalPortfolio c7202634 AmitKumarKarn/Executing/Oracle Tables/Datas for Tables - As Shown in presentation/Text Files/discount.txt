DROP TABLE DISCOUNT CASCADE CONSTRAINTS;
DROP SEQUENCE DISCOUNT_sequence;

CREATE TABLE DISCOUNT(
	discount_id INTEGER NOT NULL,
	discount_name VARCHAR(50),
	discount_percent INTEGER,
	user_id INTEGER,
	product_id INTEGER,
	CONSTRAINT PK_DISCOUNT PRIMARY KEY (discount_id),
	FOREIGN KEY (product_id) REFERENCES PRODUCT (product_id),
	FOREIGN KEY (user_id) REFERENCES USERS (user_id)
);

CREATE SEQUENCE DISCOUNT_sequence;

CREATE OR REPLACE TRIGGER DISCOUNT_on_insert
  BEFORE INSERT ON DISCOUNT
  FOR EACH ROW
BEGIN
  SELECT DISCOUNT_sequence.nextval
  INTO :new.discount_id
  FROM dual;
END;
/
